"use strict";!function(){var T=window.jQuery,V=T(window);T.fn.stick_in_parent=function(a){var _,o,t,e,y,k=(a=null==a?{}:a).sticky_class,C=a.inner_scrolling,x=a.recalc_every,j=a.parent,D=a.offset_top,F=a.spacer,P=a.bottoming;for(null==D&&(D=0),null==j&&(j=void 0),null==C&&(C=!0),null==k&&(k="is_stuck"),_=T(document),null==P&&(P=!0),y=function(a){var o;return window.getComputedStyle?(a=window.getComputedStyle(a[0]),o=parseFloat(a.getPropertyValue("width"))+parseFloat(a.getPropertyValue("margin-left"))+parseFloat(a.getPropertyValue("margin-right")),"border-box"!==a.getPropertyValue("box-sizing")&&(o+=parseFloat(a.getPropertyValue("border-left-width"))+parseFloat(a.getPropertyValue("border-right-width"))+parseFloat(a.getPropertyValue("padding-left"))+parseFloat(a.getPropertyValue("padding-right"))),o):a.outerWidth(!0)},o=function(i,n,s,d,l,c,r,m){var h,a,u,p,f,v,g,z,o,b,w,e;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),f=_.height(),g=i.parent(),!(g=null!=j?g.closest(j):g).length)throw"failed to find stick parent";if(h=u=!1,(w=null!=F?F&&i.closest(F):T("<div />"))&&w.css("position",i.css("position")),(z=function(){var a,o,t;if(!m&&(f=_.height(),a=parseInt(g.css("border-top-width"),10),o=parseInt(g.css("padding-top"),10),n=parseInt(g.css("padding-bottom"),10),s=g.offset().top+a+o,d=g.height(),u&&(h=u=!1,null==F&&(i.insertAfter(w),w.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(k),t=!0),l=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-D,c=i.outerHeight(!0),r=i.css("float"),w&&w.css({width:y(i),height:c,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:r}),t))return e()})(),c!==d)return p=void 0,v=D,b=x,e=function(){var a,o,t,e;if(!m&&(t=!1,null!=b&&--b<=0&&(b=x,z(),t=!0),t||_.height()===f||z(),t=V.scrollTop(),null!=p&&(o=t-p),p=t,u?(P&&(e=d+s<t+c+v,h)&&!e&&(h=!1,i.css({position:"fixed",bottom:"",top:v}).trigger("sticky_kit:unbottom")),t<l&&(u=!1,v=D,null==F&&("left"!==r&&"right"!==r||i.insertAfter(w),w.detach()),i.css(a={position:"",width:"",top:""}).removeClass(k).trigger("sticky_kit:unstick")),C&&(a=V.height())<c+D&&!h&&(v-=o,v=Math.max(a-c,v),v=Math.min(D,v),u)&&i.css({top:v+"px"})):l<t&&(u=!0,(a={position:"fixed",top:v}).width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(a).addClass(k),null==F&&(i.after(w),"left"!==r&&"right"!==r||w.append(i)),i.trigger("sticky_kit:stick")),u)&&P&&(null==e&&(e=d+s<t+c+v),!h)&&e)return h=!0,"static"===g.css("position")&&g.css({position:"relative"}),i.css({position:"absolute",bottom:n,top:"auto"}).trigger("sticky_kit:bottom")},o=function(){return z(),e()},a=function(){if(m=!0,V.off("touchmove",e),V.off("scroll",e),V.off("resize",o),T(document.body).off("sticky_kit:recalc",o),i.off("sticky_kit:detach",a),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),g.position("position",""),u)return null==F&&("left"!==r&&"right"!==r||i.insertAfter(w),w.remove()),i.removeClass(k)},V.on("touchmove",e),V.on("scroll",e),V.on("resize",o),T(document.body).on("sticky_kit:recalc",o),i.on("sticky_kit:detach",a),setTimeout(e,0)}},t=0,e=this.length;t<e;t++)a=this[t],o(T(a));return this}}.call(void 0),function(d){d(document).ready(function(){d("body");var a=d(".wp-header-end"),o=d(".emoza-dashboard-notice"),t=(a.length&&o.length&&(a.after(o),o.addClass("show")),d(".emoza-dashboard-dismissable")),a=(t.length&&t.on("click",function(){t.parent().hide(),d.post(window.emoza_dashboard.ajax_url,{action:"emoza_dismissed_handler",nonce:window.emoza_dashboard.nonce,notice:t.data("notice")})}),d(".emoza-dashboard-tabs-nav")),o=(a.length&&a.each(function(){var t=d(this).data("tab-wrapper-id");d(this).find(".emoza-dashboard-tabs-nav-link:not(.no-tabs-link)").on("click",function(a){a.preventDefault();var a=d(this).closest(".emoza-dashboard-tabs-nav").find(".emoza-dashboard-tabs-nav-link"),o=d(this).data("tab-to"),a=(a.each(function(){d(this).closest(".emoza-dashboard-tabs-nav-item").removeClass("active")}),d(this).closest(".emoza-dashboard-tabs-nav-item").addClass("active"),d('.emoza-dashboard-tab-content-wrapper[data-tab-wrapper-id="'+t+'"]'));a.find("> .emoza-dashboard-tab-content").removeClass("active"),a.find('> .emoza-dashboard-tab-content[data-tab-content-id="'+o+'"]').addClass("active"),"home"===o&&d(document.body).trigger("sticky_kit:recalc")})}),d(".emoza-license-button")),a=(o.length&&o.on("click",function(a){var o=d(this);"activate"===o.data("type")?o.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.activating):o.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.deactivating)}),d(".emoza-dashboard-plugin-ajax-button")),o=(a.length&&a.on("click",function(a){a.preventDefault();var e=d(this),o=e.attr("href"),a=e.data("slug"),t=e.data("type"),i=e.data("path"),n=e.html();e.addClass("emoza-ajax-progress"),e.parent().siblings(".emoza-dashboard-hero-warning").remove(),"install"===t?e.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.installing):"activate"===t?e.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.activating):"deactivate"===t&&e.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.deactivating),d.post(window.emoza_dashboard.ajax_url,{action:"emoza_plugin",nonce:window.emoza_dashboard.nonce,slug:a,type:t,path:i},function(a){if(a.success){if(e.hasClass("emoza-ajax-success-redirect"))return setTimeout(function(){e.html(window.emoza_dashboard.i18n.redirecting),setTimeout(function(){window.location=o},1e3)},500),!1;"install"===t?e.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-info").addClass("emoza-dashboard-link-danger").removeClass("loading").data("type","deactivate"):"deactivate"===t?e.html(window.emoza_dashboard.i18n.activate).removeClass("emoza-dashboard-link-danger").addClass("emoza-dashboard-link-success").removeClass("loading").data("type","activate"):e.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-success").addClass("emoza-dashboard-link-danger").removeClass("loading").data("type","deactivate"),e.removeClass("emoza-ajax-progress")}else a.data?(e.html(n),e.parent().after('<div class="emoza-dashboard-hero-warning">'+a.data+"</div>")):(e.html(n),e.parent().after('<div class="emoza-dashboard-hero-warning">'+window.emoza_dashboard.i18n.failed_message+"</div>"))}).fail(function(a,o,t){e.html(n),e.parent().after('<div class="emoza-dashboard-hero-warning">'+window.emoza_dashboard.i18n.failed_message+"</div>")})}),d(".emoza-dashboard-option-switcher")),a=(o.length&&o.on("click",function(a){a.preventDefault();var o=d(this),a=o.data("option-id"),t=!!o.data("option-activate"),e=t?window.emoza_dashboard.i18n.activating:window.emoza_dashboard.i18n.deactivating,i=!!o.data("module-after-activation-redirect"),n=i?o.data("module-after-activation-redirect"):"";o.html('<i class="dashicons dashicons-update-alt"></i>'+e).removeClass("emoza-dashboard-link-success").addClass("loading"),d.post(window.emoza_dashboard.ajax_url,{action:"emoza_option_switcher_handler",nonce:window.emoza_dashboard.nonce,optionId:a,activate:t},function(a){a.success&&(t?(o.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-success").addClass("emoza-dashboard-link-danger").removeClass("loading").data("option-activate",!1),o.parent().find(".emoza-dashboard-customize-link").removeClass("em-d-none"),i&&(window.location=n)):(o.html(window.emoza_dashboard.i18n.activate).removeClass("emoza-dashboard-link-danger").addClass("emoza-dashboard-link-success").removeClass("loading").data("option-activate",!0),o.parent().find(".emoza-dashboard-customize-link").addClass("em-d-none")))})}),d(".emoza-dashboard-module-activation")),o=(a.length&&a.on("click",function(a){a.preventDefault();var o=d(this),a=o.data("module-id"),t=!!o.data("module-activate"),e=t?window.emoza_dashboard.i18n.activating:window.emoza_dashboard.i18n.deactivating,i=!!o.data("module-after-activation-redirect"),n=i?o.data("module-after-activation-redirect"):"";o.html('<i class="dashicons dashicons-update-alt"></i>'+e).removeClass("emoza-dashboard-link-success").addClass("loading"),d.post(window.emoza_dashboard.ajax_url,{action:"emoza_module_activation_handler",nonce:window.emoza_dashboard.nonce,module:a,activate:t},function(a){a.success&&(t?(o.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-success").addClass("emoza-dashboard-link-danger").removeClass("loading").data("module-activate",!1),o.parent().find(".emoza-dashboard-customize-link").removeClass("em-d-none"),i&&(window.location=n)):(o.html(window.emoza_dashboard.i18n.activate).removeClass("emoza-dashboard-link-danger").addClass("emoza-dashboard-link-success").removeClass("loading").data("module-activate",!0),o.parent().find(".emoza-dashboard-customize-link").addClass("em-d-none")))})}),d(".emoza-dashboard-module-activation-all")),a=(o.length&&o.on("click",function(a){a.preventDefault();var a=d(this),o=!!a.data("module-activate"),t=o?window.emoza_dashboard.i18n.activating:window.emoza_dashboard.i18n.deactivating;a.html(t).addClass("loading"),d.post(window.emoza_dashboard.ajax_url,{action:"emoza_module_activation_all_handler",nonce:window.emoza_dashboard.nonce,activate:o},function(a){a.success&&window.location.reload()})}),d("[data-em-toggle-expand]")),e=(a.length&&(a.on("click",function(a){var o=d(this),t=o.find(".em-toggle-expand-content");null===a.target.closest(".emoza-dashboard-content-expand-content")&&(o.hasClass("em-collapsed")?(t.slideDown("fast"),o.removeClass("em-collapsed")):(t.slideUp("fast"),o.addClass("em-collapsed")))}),a.find(".emoza-dashboard-content-expand-link").on("click",function(a){a.preventDefault()})),d(".emoza-dashboard-sticky-wrapper").stick_in_parent({offset_top:54}),d(".emoza-dashboard-notifications-sidebar"));e.length&&(d(".emoza-dashboard-theme-notifications").on("click",function(a){a.preventDefault();a=e.find(".emoza-dashboard-notification:first-child .emoza-dashboard-notification-date").data("raw-date");e.toggleClass("opened"),d(this).hasClass("read")||d.post(window.emoza_dashboard.ajax_url,{action:"emoza_notifications_read",latest_notification_date:a,nonce:window.emoza_dashboard.nonce},function(a){a.success&&setTimeout(function(){d(".emoza-dashboard-theme-notifications").addClass("read")},2e3)})}),d(window).on("scroll",function(){60<window.pageYOffset&&(e.addClass("closing"),setTimeout(function(){e.removeClass("opened"),e.removeClass("closing")},300))}),d(".emoza-dashboard-notifications-sidebar-close").on("click",function(a){a.preventDefault(),e.addClass("closing"),setTimeout(function(){e.removeClass("opened"),e.removeClass("closing")},300)})),d(document).on("emoza-display-conditions-select2-initalize",function(a,o){var o=d(o),t=(o.closest(".emoza-display-conditions-control"),o.find(".emoza-display-conditions-select2-type")),e=t.find("select"),i=o.find(".emoza-display-conditions-select2-condition").find("select"),n=o.find(".emoza-display-conditions-select2-id"),s=n.find("select");e.select2({width:"100%",minimumResultsForSearch:-1}),e.on("select2:select",function(a){t.attr("data-type",a.params.data.id)}),i.select2({width:"100%"}),i.on("select2:select",function(a){d(a.params.data.element).data("ajax")?n.removeClass("hidden"):n.addClass("hidden"),s.val(null).trigger("change")}),i.find(":selected").data("ajax")&&n.removeClass("hidden"),s.select2({width:"100%",placeholder:"",allowClear:!0,minimumInputLength:1,ajax:{url:window.emoza_dashboard.ajax_url,dataType:"json",delay:250,cache:!0,data:function(a){return{action:"templates_builder_display_conditions_select_ajax",term:a.term,nonce:window.emoza_dashboard.nonce,source:i.val()}},processResults:function(a,o){return a.success?{results:a.data}:{}}}})}),d(document).on("click",".emoza-display-conditions-modal-toggle",function(a){a.preventDefault();var a=d(this),o=wp.template("emoza-display-conditions-template"),a=a.closest(".emoza-display-conditions-control"),t=a.find(".emoza-display-conditions-modal");t.data("initialized")?t.toggleClass("open"):(a.append(o(a.data("condition-settings"))),(o=a.find(".emoza-display-conditions-modal-content-list-item").not(".hidden")).length&&o.each(function(){d(document).trigger("emoza-display-conditions-select2-initalize",this)}),(t=a.find(".emoza-display-conditions-modal")).data("initialized",!0),t.addClass("open"))}),d(document).on("click",".emoza-display-conditions-modal",function(a){a.preventDefault();var o=d(this);d(a.target).is(o)&&d(".emoza-display-conditions-modal").removeClass("open")}),d(document).on("click",".emoza-display-conditions-modal-add",function(a){a.preventDefault();var a=d(this),o=a.closest(".emoza-display-conditions-control").find(".emoza-display-conditions-modal"),t=o.find(".emoza-display-conditions-modal-content-list"),o=o.find(".emoza-display-conditions-modal-content-list-item").first().clone(),a=a.data("condition-group");o.removeClass("hidden"),o.find(".emoza-display-conditions-select2-condition").not('[data-condition-group="'+a+'"]').remove(),t.append(o),d(document).trigger("emoza-display-conditions-select2-initalize",o)}),d(document).on("click",".emoza-display-conditions-modal-remove",function(a){a.preventDefault(),d(this).closest(".emoza-display-conditions-modal-content-list-item").remove()}),d(document).on("click",".emoza-display-conditions-modal-save",function(a){a.preventDefault();var o=[],a=d(this).closest(".emoza-display-conditions-control"),t=a.find(".emoza-display-conditions-modal"),a=a.find(".emoza-display-conditions-textarea");t.find(".emoza-display-conditions-modal-content-list-item").not(".hidden").each(function(){var a=d(this);o.push({type:a.find('select[name="type"]').val(),condition:a.find('select[name="condition"]').val(),id:a.find('select[name="id"]').val()})}),a.val(JSON.stringify(o)).trigger("change")})})}(jQuery);