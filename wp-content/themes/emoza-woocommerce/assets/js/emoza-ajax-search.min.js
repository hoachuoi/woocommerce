"use strict";var emoza=emoza||{};emoza.ajaxSearch={ajax:function(e,a,t,n){(r=new XMLHttpRequest).open("POST",emoza.ajaxurl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onload=function(){200<=this.status&&this.status<400&&n.apply(this)};var r,o="";t=Object.entries(t);for(var c=0;c<t.length;c++)o+="&"+t[c].join("=");r.send("action="+e+"&nonce="+a+o)},init:function(){var a=this,t=this,n=document.querySelectorAll(".wc-search-field, .wc-block-product-search__field");if(n.length){for(var e=0;e<n.length;e++)!function(e){n[e].setAttribute("autocomplete","off"),n[e].addEventListener("keyup",a.debounce(function(){t.searchFormHandler(n[e])},300)),n[e].addEventListener("focus",a.debounce(function(){t.searchFormHandler(n[e])},300))}(e);document.addEventListener("click",function(e){null===e.target.closest(".emoza-ajax-search__wrapper")&&t.destroy()})}},searchFormHandler:function(t){if(t.value.length<3)return!1;var n=this,e=t.value,a=t.classList,a=a.contains("wc-block-product-search__field")||a.contains("wc-search-field")?"product":"post";n.ajax("emoza_ajax_search_callback",emoza_ajax_search.nonce,{search_term:e,type:a},function(){var e=JSON.parse(this.response),a=t.parentNode.getElementsByClassName("emoza-ajax-search__wrapper")[0],e=(void 0===a&&((a=document.createElement("div")).className="emoza-ajax-search__wrapper",t.parentNode.append(a),t.parentNode.classList.add("emoza-ajax-search")),a.innerHTML=e.output,document.querySelector(".emoza-ajax-search-products"));null!==e&&n.scrollbarVisible(e)&&e.classList.add("has-scrollbar"),n.elementIsOutOfScreenHorizontal(a)&&a.classList.add("reverse"),window.dispatchEvent(new Event("emoza.ajax.search.results.loaded"))})},destroy:function(){var e=document.querySelectorAll(".emoza-ajax-search__wrapper");if(e.length)for(var a=0;a<e.length;a++)e[a].remove()},debounce:function(n,r){var o=null;return function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];window.clearTimeout(o),o=window.setTimeout(function(){n.apply(null,a)},r)}},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight},elementIsOutOfScreenHorizontal:function(e){e=e.getBoundingClientRect();return e.x+e.width>window.innerWidth}},jQuery(document).ready(function(){emoza.ajaxSearch.init()});